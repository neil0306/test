# 🎨 图片水印添加工具

一个基于 OpenCV 和 Gradio 的图片水印添加工具，支持文字水印和图片水印，提供丰富的参数调整选项。

## ✨ 功能特性

- 📷 支持多种图片格式：TIFF、JPG、PNG、BMP、WebP 等
- 📝 文字水印：可调整字体大小、颜色、透明度、倾斜角度
- 🖼️ 图片水印：支持透明度、缩放比例、倾斜角度调整
- 🎛️ 实时参数调整：位置、透明度、角度等参数可实时预览
- 💾 一键下载：处理完成后可直接下载结果
- 🌐 Web 界面：基于 Gradio 的现代化 Web 界面

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行应用

```bash
python watermark_app.py
```

### 3. 访问界面

应用启动后，在浏览器中访问：`http://localhost:7860`

## 📖 使用指南

### 文字水印

1. 选择"文字水印"类型
2. 输入要添加的水印文字
3. 调整字体大小和颜色
4. 设置位置、透明度和倾斜角度
5. 点击"添加水印"按钮

### 图片水印

1. 选择"图片水印"类型
2. 上传水印图片
3. 调整大小比例
4. 设置位置、透明度和倾斜角度
5. 点击"添加水印"按钮

## 🛠️ 技术实现

- **OpenCV**: 图像处理核心库
- **PIL/Pillow**: 文字渲染和图像处理
- **Gradio**: Web 界面框架
- **NumPy**: 数值计算支持

## 📝 参数说明

| 参数 | 描述 | 范围 |
|------|------|------|
| 位置 X/Y | 水印在图片中的位置 | 0-1000 |
| 透明度 | 水印的透明程度 | 0.1-1.0 |
| 倾斜角度 | 水印的旋转角度 | -45°到 45° |
| 字体大小 | 文字水印的字体大小 | 10-200 |
| 大小比例 | 图片水印相对原图的比例 | 0.05-1.0 |

## 💡 使用技巧

- 建议透明度设置在 0.3-0.8 之间，效果最佳
- 文字水印支持中文和英文
- 图片水印建议使用 PNG 格式以支持透明背景
- 可以通过调整位置参数实现水印的精确定位

## 🐛 故障排除

### 常见问题

1. **字体显示问题**：程序会自动尝试使用系统字体，如果没有找到合适字体会使用默认字体
2. **图片格式不支持**：确保上传的图片是常见格式（JPG、PNG、TIFF 等）
3. **内存不足**：处理大图片时可能需要更多内存

### 系统要求

- Python 3.7+
- 至少 2GB RAM（推荐 4GB+）
- 支持的操作系统：Windows、macOS、Linux

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！ 